# PRD - EstratÃ©gia de Afiliados - geek.bidu.guru

**Documento**: EstratÃ©gia Detalhada de Marketing de Afiliados
**Projeto**: geek.bidu.guru
**VersÃ£o**: 1.0
**Data**: 2025-12-10
**Status**: Planejamento
**Baseado em**: reports/affiliate-marketing-analysis.md

---

## ğŸ“‹ Ãndice

1. [VisÃ£o Geral](#visÃ£o-geral)
2. [Benchmarks e Metas](#benchmarks-e-metas)
3. [MÃ©tricas e KPIs Detalhados](#mÃ©tricas-e-kpis-detalhados)
4. [Sistema /goto/ AvanÃ§ado](#sistema-goto-avanÃ§ado)
5. [Scorecard de Produtos](#scorecard-de-produtos)
6. [OtimizaÃ§Ã£o de CTAs](#otimizaÃ§Ã£o-de-ctas)
7. [EstratÃ©gias de ConversÃ£o](#estratÃ©gias-de-conversÃ£o)
8. [Testes A/B](#testes-ab)
9. [Dashboard e Analytics](#dashboard-e-analytics)
10. [Compliance e TransparÃªncia](#compliance-e-transparÃªncia)
11. [ProteÃ§Ã£o Contra Fraude](#proteÃ§Ã£o-contra-fraude)
12. [Roadmap de ImplementaÃ§Ã£o](#roadmap-de-implementaÃ§Ã£o)

---

## ğŸ¯ VisÃ£o Geral

Este documento complementa o PRD principal com **estratÃ©gias avanÃ§adas de otimizaÃ§Ã£o de afiliados**, baseadas na anÃ¡lise detalhada do Affiliate Marketing Specialist. O objetivo Ã© maximizar CTR, taxa de conversÃ£o e receita por visualizaÃ§Ã£o (RPM).

### Objetivos PrimÃ¡rios

1. **CTR de Links de Afiliados**: Atingir 4-6% (vs mÃ©dia de mercado 2-3%)
2. **Taxa de ConversÃ£o**: Atingir 6-8% (vs mÃ©dia de mercado 3-5%)
3. **RPM (Revenue Per Mille)**: Atingir R$ 30-50 (vs mÃ©dia de mercado R$ 10-20)
4. **Receita em 12 Meses**: R$ 5.000-10.000/mÃªs

### Pontos Fortes Identificados

âœ… Sistema /goto/ para tracking de cliques
âœ… MÃºltiplas plataformas de afiliados (Amazon, ML, Shopee)
âœ… AutomaÃ§Ã£o de atualizaÃ§Ã£o de preÃ§os
âœ… Compliance mencionado (disclaimers, atributos de link)

### Gaps CrÃ­ticos a Serem Resolvidos

âš ï¸ Benchmarks de performance nÃ£o definidos
âš ï¸ MÃ©tricas de afiliados incompletas (EPC, RPM, AOV ausentes)
âš ï¸ Posicionamento de links nÃ£o especificado
âš ï¸ EstratÃ©gias de urgÃªncia/escassez nÃ£o mencionadas
âš ï¸ Framework de testes A/B ausente

---

## ğŸ“Š Benchmarks e Metas

### Performance por Plataforma

| Plataforma | CTR Alvo | Conv. Rate | ComissÃ£o MÃ©dia | RPM Alvo | Cookie Duration | Prioridade |
|------------|----------|------------|----------------|----------|-----------------|------------|
| **Mercado Livre** | 3-5% | 6-10% | 4-8% | R$ 20-30 | 10 dias | â­â­â­â­â­ Muito Alta |
| **Amazon** | 4-6% | 5-8% | 3-5% | R$ 15-25 | 24h | â­â­â­â­ Alta |
| **Shopee** | 2-4% | 4-6% | 2-4% | R$ 8-15 | 7 dias | â­â­â­ MÃ©dia |

### Justificativa de PriorizaÃ§Ã£o

**Mercado Livre (Prioridade MÃ¡xima)**:
- Cookie mais longo (10 dias) â†’ maior janela de conversÃ£o
- ComissÃµes competitivas (4-8%)
- PÃºblico brasileiro nativo
- Frete grÃ¡tis competitivo
- Maior taxa de conversÃ£o histÃ³rica

**Amazon (Prioridade Alta)**:
- Autoridade de marca e confianÃ§a
- Amazon Prime (frete rÃ¡pido/grÃ¡tis)
- Variedade de produtos
- Cookie curto (24h) exige estratÃ©gia de urgÃªncia

**Shopee (Prioridade MÃ©dia)**:
- PreÃ§os baixos atraem pÃºblico jovem
- Menor comissÃ£o e conversÃ£o
- Bom para produtos de entrada (<R$ 50)

### Metas de Performance por Tipo de Post

| Tipo de Post | CTR Esperado | Produtos por Post | Cliques Esperados | Conv. Rate | Receita/Post |
|--------------|--------------|-------------------|-------------------|------------|--------------|
| **Produto Ãšnico** | 5-8% | 1-3 | 50-80 / 1k views | 7-10% | R$ 25-40 |
| **Listicle** (Top 10) | 6-10% | 10-15 | 60-100 / 1k views | 5-8% | R$ 30-60 |
| **Guia Completo** | 4-7% | 5-20 | 40-70 / 1k views | 6-9% | R$ 35-55 |

### EstratÃ©gia de Copy por Cookie Duration

**Amazon (24h cookie - UrgÃªncia MÃ¡xima)**:
```markdown
â° **Oferta RelÃ¢mpago**: Esta promoÃ§Ã£o pode acabar a qualquer momento!
ğŸ”¥ **Estoque Limitado**: Apenas 12 unidades disponÃ­veis
âš¡ **Entrega RÃ¡pida**: Receba amanhÃ£ com Amazon Prime

CTA: "ğŸ›’ Garantir Agora com Frete GrÃ¡tis Prime"
```

**Mercado Livre (10 dias - ÃŠnfase em BenefÃ­cios)**:
```markdown
âœ… **Frete GrÃ¡tis**: Entrega garantida em atÃ© 3 dias
ğŸ“¦ **Mercado Livre Full**: Compra 100% protegida e devoluÃ§Ã£o grÃ¡tis
â­ **AvaliaÃ§Ã£o 4.8/5**: Mais de 2.500 compradores satisfeitos

CTA: "ğŸ“¦ Ver Melhor PreÃ§o no Mercado Livre"
```

**Shopee (7 dias - Foco em PreÃ§o)**:
```markdown
ğŸ’° **Menor PreÃ§o Garantido**: R$ 79,90 (40% OFF)
ğŸ **Cupom Exclusivo**: GEEK15 para mais 15% de desconto
ğŸšš **Frete GrÃ¡tis**: Sem valor mÃ­nimo

CTA: "ğŸ’¸ Comprar com Desconto na Shopee"
```

---

## ğŸ“ˆ MÃ©tricas e KPIs Detalhados

### MÃ©tricas Principais (Dashboard DiÃ¡rio)

#### 1. CTR (Click-Through Rate)
**DefiniÃ§Ã£o**: Porcentagem de visualizaÃ§Ãµes que resultam em cliques

```
CTR = (Total de Cliques / Total de VisualizaÃ§Ãµes) Ã— 100
```

**Metas**:
- Overall: 4-6%
- Produto Ãšnico: 5-8%
- Listicle: 6-10%
- Guia: 4-7%

**SegmentaÃ§Ã£o**:
- Por plataforma (Amazon, ML, Shopee)
- Por tipo de post
- Por dispositivo (mobile vs desktop)
- Por posiÃ§Ã£o do link (inÃ­cio, meio, fim)

#### 2. EPC (Earnings Per Click)
**DefiniÃ§Ã£o**: Ganho mÃ©dio por cada clique em link de afiliado

```
EPC = Receita Total / Total de Cliques
```

**Metas**:
- Amazon: R$ 0,40-0,60 por clique
- Mercado Livre: R$ 0,50-0,80 por clique
- Shopee: R$ 0,20-0,40 por clique

**Uso**: Priorizar produtos com maior EPC

#### 3. RPM (Revenue Per Mille)
**DefiniÃ§Ã£o**: Receita por 1.000 visualizaÃ§Ãµes de pÃ¡gina

```
RPM = (Receita Total / VisualizaÃ§Ãµes) Ã— 1000
```

**Metas**:
- Fase 1 (Meses 1-3): R$ 15-25
- Fase 2 (Meses 4-6): R$ 25-35
- Fase 3 (Meses 7-12): R$ 30-50

**Uso**: Medir efetividade geral da monetizaÃ§Ã£o

#### 4. Taxa de ConversÃ£o
**DefiniÃ§Ã£o**: Porcentagem de cliques que resultam em compras

```
Conv. Rate = (Total de ConversÃµes / Total de Cliques) Ã— 100
```

**Metas**:
- Amazon: 5-8%
- Mercado Livre: 6-10%
- Shopee: 4-6%

**Nota**: Depende de APIs das plataformas (nem sempre disponÃ­vel)

#### 5. AOV (Average Order Value)
**DefiniÃ§Ã£o**: Valor mÃ©dio de cada pedido convertido

```
AOV = Receita Total / NÃºmero de ConversÃµes
```

**Metas**:
- Produtos atÃ© R$ 50: AOV R$ 60-80 (cross-sell)
- Produtos R$ 50-100: AOV R$ 110-140
- Produtos R$ 100+: AOV R$ 150-250

**Uso**: Identificar produtos que geram tickets maiores

### MÃ©tricas SecundÃ¡rias (Dashboard Semanal)

#### 6. Produtos Mais Clicados
Top 10 produtos por nÃºmero de cliques (Ãºltimos 7 dias)

#### 7. Produtos Mais RentÃ¡veis
Top 10 produtos por receita estimada (Ãºltimos 7 dias)

#### 8. Posts Mais RentÃ¡veis
Top 10 posts por receita (Ãºltimos 7 dias)

#### 9. CTR por PosiÃ§Ã£o de Link
- InÃ­cio do post (primeiros 20% do conteÃºdo)
- Meio do post (20-80% do conteÃºdo)
- Fim do post (Ãºltimos 20% do conteÃºdo)

#### 10. CTR por Dispositivo
- Mobile (70-80% do trÃ¡fego)
- Desktop (20-30% do trÃ¡fego)
- Tablet (5-10% do trÃ¡fego)

### Funil de ConversÃ£o Completo

```
1000 VisualizaÃ§Ãµes de Post
  â†“ CTR 4%
40 Cliques em Link de Afiliado
  â†“ Bounce 20% (nÃ£o chegou na loja)
32 Chegadas na Loja
  â†“ Taxa de ConversÃ£o 10%
3 Compras Finalizadas
  â†“ AOV R$ 150
R$ 450 em vendas
  â†“ ComissÃ£o 5%
R$ 22,50 de receita

â†’ RPM = R$ 22,50
â†’ EPC = R$ 0,56
```

---

## ğŸ”— Sistema /goto/ AvanÃ§ado

### ImplementaÃ§Ã£o Atual (PRD)

```python
@app.get("/goto/{affiliate_redirect_slug}")
async def redirect_affiliate(slug: str):
    # Buscar produto
    # Registrar clique
    # Redirecionar
    pass
```

### Melhorias Propostas

#### 1. UTM Parameters para Tracking

```python
@app.get("/goto/{slug}")
async def redirect_affiliate(
    slug: str,
    request: Request,
    db: Session = Depends(get_db)
):
    # Buscar produto
    product_price = db.query(ProductPrice).filter(
        ProductPrice.affiliate_redirect_slug == slug
    ).first()

    if not product_price:
        raise HTTPException(404)

    # Detectar origem
    referer = request.headers.get('referer', '')
    user_agent = request.headers.get('user-agent', '')

    # Extrair post_id do referer
    post_id = extract_post_id_from_url(referer)

    # Detectar dispositivo
    device = detect_device(user_agent)  # 'mobile', 'desktop', 'tablet'

    # GeolocalizaÃ§Ã£o (CloudFlare header)
    country = request.headers.get('cf-ipcountry', 'BR')
    region = request.headers.get('cf-region', '')
    city = request.headers.get('cf-city', '')

    # Registrar clique (expandido)
    click = AffiliateClick(
        product_id=product_price.product_id,
        post_id=post_id,
        platform=product_price.platform,
        locale=product_price.locale,
        ip_address=request.client.host,
        user_agent=user_agent,
        referer=referer,
        device=device,
        country=country,
        region=region,
        city=city,
        clicked_at=datetime.utcnow()
    )
    db.add(click)
    db.commit()

    # Construir URL com UTM parameters
    utm_params = {
        'utm_source': 'geekbiduguru',
        'utm_medium': 'affiliate',
        'utm_campaign': f'post-{post_id}' if post_id else 'direct',
        'utm_content': slug,
        'utm_term': product_price.platform
    }

    # Adicionar UTM Ã  URL de afiliado
    final_url = add_utm_params(product_price.affiliate_url_raw, utm_params)

    # Redirecionar
    return RedirectResponse(url=final_url, status_code=302)
```

#### 2. Tabela affiliate_clicks Expandida

```sql
CREATE TABLE affiliate_clicks (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),

    -- Relacionamentos
    product_id UUID REFERENCES products(id),
    post_id UUID REFERENCES posts(id),
    locale VARCHAR(5) REFERENCES locales(code),

    -- Plataforma
    platform VARCHAR(50) NOT NULL,  -- 'amazon', 'mercado_livre', 'shopee'

    -- Origem do clique
    ip_address VARCHAR(45),
    user_agent TEXT,
    referer TEXT,

    -- Dispositivo
    device VARCHAR(20),  -- 'mobile', 'desktop', 'tablet'

    -- GeolocalizaÃ§Ã£o
    country VARCHAR(2),  -- 'BR', 'PT', 'MX'
    region VARCHAR(100),
    city VARCHAR(100),

    -- PosiÃ§Ã£o do link no post (calculado no frontend via JS)
    link_position VARCHAR(20),  -- 'top', 'middle', 'bottom'
    scroll_depth_percentage INTEGER,  -- Quanto o usuÃ¡rio tinha scrollado

    -- Flags de qualidade
    is_suspicious BOOLEAN DEFAULT false,  -- Clique fraudulento?
    is_bot BOOLEAN DEFAULT false,  -- Detectado como bot?

    -- Timestamps
    clicked_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    -- ConversÃ£o (se API fornecer)
    converted_at TIMESTAMP,
    conversion_value DECIMAL(10, 2),
    commission_earned DECIMAL(10, 2)
);

CREATE INDEX idx_affiliate_clicks_product ON affiliate_clicks(product_id);
CREATE INDEX idx_affiliate_clicks_post ON affiliate_clicks(post_id);
CREATE INDEX idx_affiliate_clicks_platform ON affiliate_clicks(platform);
CREATE INDEX idx_affiliate_clicks_device ON affiliate_clicks(device);
CREATE INDEX idx_affiliate_clicks_date ON affiliate_clicks(clicked_at);
CREATE INDEX idx_affiliate_clicks_country ON affiliate_clicks(country);
```

#### 3. Tracking de PosiÃ§Ã£o do Link (Frontend)

```javascript
// static/js/affiliate-tracking.js

// Detectar posiÃ§Ã£o do link no post
function trackLinkPosition(linkElement, postContent) {
    const linkOffset = linkElement.offsetTop;
    const contentHeight = postContent.scrollHeight;

    const positionPercent = (linkOffset / contentHeight) * 100;

    let position;
    if (positionPercent < 20) {
        position = 'top';
    } else if (positionPercent > 80) {
        position = 'bottom';
    } else {
        position = 'middle';
    }

    return position;
}

// Detectar scroll depth
function getScrollDepth() {
    const windowHeight = window.innerHeight;
    const documentHeight = document.documentElement.scrollHeight;
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

    return Math.round((scrollTop / (documentHeight - windowHeight)) * 100);
}

// Interceptar cliques em links de afiliado
document.querySelectorAll('a[data-affiliate="true"]').forEach(link => {
    link.addEventListener('click', (e) => {
        const postContent = document.querySelector('.post-content');
        const position = trackLinkPosition(link, postContent);
        const scrollDepth = getScrollDepth();

        // Adicionar parÃ¢metros Ã  URL do /goto/
        const url = new URL(link.href);
        url.searchParams.set('pos', position);
        url.searchParams.set('scroll', scrollDepth);

        // Atualizar href
        link.href = url.toString();
    });
});
```

---

## ğŸ¯ Scorecard de Produtos

### Objetivo
Criar sistema de pontuaÃ§Ã£o interna para priorizar produtos com maior potencial de conversÃ£o e receita.

### Algoritmo de Scoring

```python
def calculate_affiliate_score(product: Product, product_price: ProductPrice) -> int:
    """
    Calcula score de 0-100 para priorizaÃ§Ã£o de produtos.

    Pesos:
    - ComissÃ£o: 30%
    - PreÃ§o (sweet spot): 25%
    - Disponibilidade: 20%
    - Rating: 15%
    - Popularidade: 10%
    """
    score = 0

    # 1. ComissÃ£o (30 pontos mÃ¡ximo)
    # ComissÃ£o ideal: 5-10%
    commission_rate = product_price.commission_percentage
    if commission_rate >= 8:
        score += 30
    elif commission_rate >= 5:
        score += 25
    elif commission_rate >= 3:
        score += 15
    else:
        score += 5

    # 2. PreÃ§o Sweet Spot (25 pontos mÃ¡ximo)
    # Ideal: R$ 50-150 (melhor taxa de conversÃ£o)
    price = product_price.price
    if 50 <= price <= 150:
        score += 25
    elif 30 <= price < 50:
        score += 20  # Bom para volume
    elif 150 < price <= 200:
        score += 20  # Bom para ticket mÃ©dio
    elif 200 < price <= 300:
        score += 10
    else:
        score += 5  # Muito barato (<R$ 30) ou muito caro (>R$ 300)

    # 3. Disponibilidade (20 pontos mÃ¡ximo)
    if product_price.availability == 'available':
        score += 20
    elif product_price.availability == 'limited_stock':
        score += 15  # Escassez pode ajudar conversÃ£o
    elif product_price.availability == 'pre_order':
        score += 10
    else:  # 'out_of_stock'
        score += 0

    # 4. Rating (15 pontos mÃ¡ximo)
    rating = product_price.rating or 0
    if rating >= 4.5:
        score += 15
    elif rating >= 4.0:
        score += 10
    elif rating >= 3.5:
        score += 5
    else:
        score += 0

    # 5. Popularidade (10 pontos mÃ¡ximo)
    review_count = product_price.review_count or 0
    if review_count >= 1000:
        score += 10
    elif review_count >= 500:
        score += 8
    elif review_count >= 100:
        score += 5
    elif review_count >= 50:
        score += 3
    else:
        score += 0

    return min(score, 100)  # Garantir mÃ¡ximo de 100

# Exemplo de uso
product = db.query(Product).get(product_id)
product_price = db.query(ProductPrice).filter(
    ProductPrice.product_id == product_id,
    ProductPrice.platform == 'amazon',
    ProductPrice.locale == 'pt-BR'
).first()

score = calculate_affiliate_score(product, product_price)
# score = 85 (Excelente produto para promover)
```

### AtualizaÃ§Ã£o AutomÃ¡tica de Scores

```python
# Workflow n8n ou Cron job diÃ¡rio
def update_all_product_scores():
    """Atualiza scores de todos os produtos diariamente"""

    products = db.query(ProductPrice).all()

    for product_price in products:
        product = product_price.product
        score = calculate_affiliate_score(product, product_price)

        # Salvar score
        product_price.internal_score = score

    db.commit()

    print(f"Atualizado {len(products)} scores de produtos")
```

### Uso do Scorecard no Fluxo A (n8n)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cron: Diariamente 6h AM  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get Products:                            â”‚
â”‚ - WHERE internal_score >= 70             â”‚
â”‚ - WHERE availability = 'available'       â”‚
â”‚ - ORDER BY internal_score DESC           â”‚
â”‚ - LIMIT 10                               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ensure Diversity:                        â”‚
â”‚ - 30% produtos atÃ© R$ 50                 â”‚
â”‚ - 35% produtos R$ 50-100                 â”‚
â”‚ - 20% produtos R$ 100-200                â”‚
â”‚ - 15% produtos R$ 200+                   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LLM: Generate Post                       â”‚
â”‚ (Usando apenas produtos score >= 70)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Dashboard de Scorecard

```sql
-- Query: Top 20 produtos por score
SELECT
    p.id,
    pt.name,
    pp.platform,
    pp.price,
    pp.commission_percentage,
    pp.rating,
    pp.review_count,
    pp.internal_score,
    COUNT(ac.id) as total_clicks,
    SUM(ac.commission_earned) as total_revenue
FROM products p
JOIN product_translations pt ON p.id = pt.product_id
JOIN product_prices pp ON p.id = pp.product_id
LEFT JOIN affiliate_clicks ac ON p.id = ac.product_id
WHERE pp.locale = 'pt-BR'
  AND pp.availability = 'available'
GROUP BY p.id, pt.name, pp.platform, pp.price, pp.commission_percentage, pp.rating, pp.review_count, pp.internal_score
ORDER BY pp.internal_score DESC
LIMIT 20;
```

---

## ğŸ¨ OtimizaÃ§Ã£o de CTAs

### PrincÃ­pios de Design de CTAs

1. **Contraste Visual**: BotÃ£o deve destacar do resto da pÃ¡gina
2. **Tamanho Adequado**: MÃ­nimo 44px de altura (mobile-friendly)
3. **EspaÃ§amento Generoso**: Ãrea clicÃ¡vel confortÃ¡vel
4. **Copy Orientada a AÃ§Ã£o**: Verbos claros ("Comprar", "Ver", "Garantir")
5. **Senso de UrgÃªncia**: Quando apropriado ("Agora", "Hoje", "Limitado")

### VariaÃ§Ãµes de BotÃµes para Testes A/B

#### VariaÃ§Ã£o 1: Amarelo com Ãcone (UrgÃªncia)
```html
<a href="/goto/produto-slug"
   class="btn-affiliate btn-yellow"
   rel="sponsored"
   data-affiliate="true">
  <span class="icon">ğŸ›’</span>
  <span class="text">Comprar Agora com Frete GrÃ¡tis</span>
  <span class="price">R$ 89,90</span>
</a>
```

```css
.btn-affiliate.btn-yellow {
    background: linear-gradient(135deg, #FACC15 0%, #F59E0B 100%);
    color: #78350F;
    font-weight: 700;
    font-size: 16px;
    padding: 14px 24px;
    border-radius: 8px;
    border: 2px solid #F59E0B;
    box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
    display: inline-flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
    transition: all 0.2s;
}

.btn-affiliate.btn-yellow:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(245, 158, 11, 0.4);
}
```

#### VariaÃ§Ã£o 2: Roxo Geek (Marca)
```html
<a href="/goto/produto-slug"
   class="btn-affiliate btn-purple"
   rel="sponsored"
   data-affiliate="true">
  <span class="platform-icon">
    <img src="/static/icons/amazon.svg" alt="Amazon">
  </span>
  <span class="text">Ver na Amazon</span>
  <span class="badge">MELHOR PREÃ‡O</span>
</a>
```

```css
.btn-affiliate.btn-purple {
    background: linear-gradient(135deg, #7C3AED 0%, #6D28D9 100%);
    color: #FFFFFF;
    font-weight: 600;
    font-size: 16px;
    padding: 14px 24px;
    border-radius: 8px;
    border: none;
    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
    display: inline-flex;
    align-items: center;
    gap: 12px;
}
```

#### VariaÃ§Ã£o 3: Verde ConversÃ£o (ConfianÃ§a)
```html
<a href="/goto/produto-slug"
   class="btn-affiliate btn-green"
   rel="sponsored"
   data-affiliate="true">
  <span class="icon">âœ“</span>
  <span class="text">Garantir Desconto</span>
</a>
```

```css
.btn-affiliate.btn-green {
    background: linear-gradient(135deg, #10B981 0%, #059669 100%);
    color: #FFFFFF;
    font-weight: 600;
    font-size: 18px;
    padding: 16px 32px;
    border-radius: 12px;
    border: none;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}
```

### VariaÃ§Ãµes de Copy (Testes A/B)

| Variante | Copy | Contexto de Uso |
|----------|------|-----------------|
| A | "Ver PreÃ§o" | Neutro, informativo |
| B | "Comprar Agora" | Direto, aÃ§Ã£o imediata |
| C | "Ver Oferta" | SugestÃ£o de desconto |
| D | "Garantir Agora" | UrgÃªncia + escassez |
| E | "Comprar com Frete GrÃ¡tis" | BenefÃ­cio explÃ­cito |
| F | "Ver na [Plataforma]" | TransparÃªncia de destino |
| G | "Pegar Desconto" | Sugere vantagem |
| H | "Adicionar ao Carrinho" | Familiar (e-commerce) |

### Posicionamento de CTAs no Post

#### EstratÃ©gia: 3 CTAs por Produto

```markdown
# Caneca TÃ©rmica Baby Yoda - MantÃ©m Sua Bebida Quente por Horas

[Imagem: Caneca Baby Yoda]

Se vocÃª Ã© fÃ£ de Star Wars e The Mandalorian, essa **caneca tÃ©rmica** Ã© o presente perfeito...

**[CTA #1 - InÃ­cio]** â† ApÃ³s introduÃ§Ã£o (primeiros 2-3 parÃ¡grafos)
ğŸ›’ Comprar Agora na Amazon - R$ 89,90 com Frete GrÃ¡tis

---

## CaracterÃ­sticas Principais

âœ… MantÃ©m temperatura por atÃ© 6 horas
âœ… Material: aÃ§o inoxidÃ¡vel 304
âœ… Capacidade: 450ml
âœ… Tampa Ã  prova de vazamento

Esta caneca usa **tecnologia de dupla parede** que...

**[CTA #2 - Meio]** â† ApÃ³s caracterÃ­sticas ou benefÃ­cios
ğŸ“¦ Ver Melhor PreÃ§o no Mercado Livre - R$ 94,90

---

## Onde Comprar?

Comparamos os preÃ§os nas principais lojas:

| Loja | PreÃ§o | Frete | Link |
|------|-------|-------|------|
| Amazon | R$ 89,90 | GrÃ¡tis (Prime) | [Ver Oferta] |
| Mercado Livre | R$ 94,90 | GrÃ¡tis | [Ver Oferta] |
| Shopee | R$ 79,90 | GrÃ¡tis | [Ver Oferta] |

**[CTA #3 - Fim]** â† Antes da conclusÃ£o
â° OFERTA LIMITADA: Garantir Agora com 15% OFF
```

### OtimizaÃ§Ã£o Mobile

```css
/* CTAs otimizados para mobile */
@media (max-width: 768px) {
    .btn-affiliate {
        /* BotÃ£o full-width em mobile */
        width: 100%;
        max-width: 100%;
        font-size: 18px;
        padding: 18px 24px;

        /* Altura mÃ­nima para dedo (Apple HIG) */
        min-height: 44px;

        /* EspaÃ§amento entre botÃµes */
        margin: 16px 0;
    }

    /* Sticky CTA no footer (mobile) */
    .sticky-cta-mobile {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: #FFFFFF;
        padding: 12px 16px;
        box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
        z-index: 1000;

        /* Aparecer apÃ³s scroll */
        transform: translateY(100%);
        transition: transform 0.3s;
    }

    .sticky-cta-mobile.visible {
        transform: translateY(0);
    }
}
```

```javascript
// Ativar sticky CTA apÃ³s usuÃ¡rio scrollar 50% da pÃ¡gina
window.addEventListener('scroll', () => {
    const scrollPercent = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;

    const stickyCTA = document.querySelector('.sticky-cta-mobile');
    if (scrollPercent > 50) {
        stickyCTA.classList.add('visible');
    } else {
        stickyCTA.classList.remove('visible');
    }
});
```

---

## ğŸš€ EstratÃ©gias de ConversÃ£o

### 1. UrgÃªncia e Escassez

#### TÃ©cnica: Countdown Timer
```html
<div class="urgency-banner">
  <span class="icon">â°</span>
  <span class="text">Oferta expira em:</span>
  <span class="countdown" data-end="2025-12-11T23:59:59">
    <span class="hours">12</span>h
    <span class="minutes">45</span>m
    <span class="seconds">32</span>s
  </span>
</div>
```

**Quando usar**:
- Black Friday / Cyber Monday
- PromoÃ§Ãµes relÃ¢mpago reais da Amazon
- PrÃ©-venda de produtos

**Quando NÃƒO usar**:
- UrgÃªncia falsa (ilegal e antiÃ©tico)
- Produtos sempre disponÃ­veis

#### TÃ©cnica: Estoque Limitado
```markdown
ğŸ”¥ **Apenas 8 unidades restantes** - Estoque acabando rÃ¡pido!
```

**Quando usar**:
- Se API da plataforma fornece quantidade em estoque
- Produtos com histÃ³rico de esgotar

#### TÃ©cnica: Prova Social
```markdown
â­ **AvaliaÃ§Ã£o 4.8/5** - Mais de 2.500 compradores satisfeitos
ğŸ’¬ "Melhor caneca geek que jÃ¡ comprei!" - JoÃ£o Silva
âœ… **Produto mais vendido** na categoria Canecas Geek
```

### 2. Comparadores de PreÃ§o

#### Template: Tabela Comparativa
```html
<div class="price-comparison-table">
  <h3>Compare PreÃ§os e Escolha a Melhor Oferta</h3>

  <table>
    <thead>
      <tr>
        <th>Loja</th>
        <th>PreÃ§o</th>
        <th>Frete</th>
        <th>Prazo</th>
        <th>AvaliaÃ§Ã£o</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr class="best-price">
        <td>
          <img src="/static/icons/amazon.svg" alt="Amazon">
          <strong>Amazon</strong>
        </td>
        <td class="price">
          <span class="current">R$ 89,90</span>
          <span class="original">R$ 129,90</span>
        </td>
        <td>
          <span class="free">GrÃ¡tis</span>
          <small>(Prime)</small>
        </td>
        <td>1-2 dias</td>
        <td>â­ 4.7</td>
        <td>
          <a href="/goto/caneca-baby-yoda-amazon" class="btn-buy">
            Ver Oferta
          </a>
        </td>
      </tr>

      <!-- Repetir para ML, Shopee... -->
    </tbody>
  </table>

  <p class="winner-badge">
    ğŸ† <strong>Melhor Oferta:</strong> Amazon (menor preÃ§o + frete grÃ¡tis + entrega rÃ¡pida)
  </p>
</div>
```

### 3. TÃ©cnica de Ancoragem de PreÃ§os

```markdown
## PreÃ§o Original vs Oferta Atual

~~R$ 129,90~~ â†’ **R$ 89,90**

ğŸ‰ **VocÃª economiza: R$ 40,00 (31% OFF)**

ğŸ’° **Menor preÃ§o dos Ãºltimos 30 dias!**
```

### 4. BenefÃ­cios em Lista (Bullets)

```markdown
## Por Que Comprar Esta Caneca?

âœ… MantÃ©m bebidas quentes por 6 horas (ou frias por 12 horas)
âœ… Design oficial The Mandalorian (licenciado pela Disney)
âœ… Tampa hermÃ©tica - leve na mochila sem preocupaÃ§Ã£o
âœ… Material premium (aÃ§o inoxidÃ¡vel 304)
âœ… Presente perfeito para fÃ£s de Star Wars
âœ… Garantia de 1 ano do fabricante
```

### 5. Cross-Sell e Upsell

```markdown
## Complete Seu Kit Geek

**Quem comprou esta caneca tambÃ©m levou:**

1. **Mousepad Baby Yoda** - R$ 34,90 [Ver Produto]
2. **Camiseta The Mandalorian** - R$ 59,90 [Ver Produto]
3. **Funko Pop Grogu** - R$ 89,90 [Ver Produto]

ğŸ’¡ **Compre os 3 e economize**: R$ 174,70 (vs R$ 184,70 separado)
```

---

## ğŸ§ª Testes A/B

### Framework de Testes A/B

#### Tabela de ConfiguraÃ§Ã£o

```sql
CREATE TABLE ab_tests (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) NOT NULL,
    description TEXT,

    -- Tipo de teste
    test_type VARCHAR(50) NOT NULL,  -- 'cta_color', 'cta_text', 'cta_position', 'layout'

    -- Variantes
    control_variant JSONB NOT NULL,  -- Variante A (controle)
    test_variant JSONB NOT NULL,     -- Variante B (teste)

    -- ConfiguraÃ§Ã£o
    traffic_split INTEGER DEFAULT 50,  -- % de trÃ¡fego para variante B (0-100)

    -- MÃ©tricas alvo
    primary_metric VARCHAR(50) NOT NULL,  -- 'ctr', 'conversion_rate', 'revenue'

    -- Status
    status VARCHAR(20) DEFAULT 'draft',  -- 'draft', 'running', 'completed', 'paused'

    -- Datas
    started_at TIMESTAMP,
    ended_at TIMESTAMP,

    -- Resultados
    winner VARCHAR(1),  -- 'A' ou 'B'
    statistical_significance DECIMAL(5, 2),  -- % de confianÃ§a

    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE ab_test_results (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    ab_test_id UUID REFERENCES ab_tests(id) ON DELETE CASCADE,
    variant VARCHAR(1) NOT NULL,  -- 'A' ou 'B'

    -- MÃ©tricas
    views INTEGER DEFAULT 0,
    clicks INTEGER DEFAULT 0,
    conversions INTEGER DEFAULT 0,
    revenue DECIMAL(10, 2) DEFAULT 0.00,

    -- Calculadas
    ctr DECIMAL(5, 2),  -- %
    conversion_rate DECIMAL(5, 2),  -- %

    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    UNIQUE(ab_test_id, variant)
);
```

### Testes PrioritÃ¡rios (Fase 1)

#### Teste #1: Cor do BotÃ£o de CTA
**Objetivo**: Descobrir qual cor gera maior CTR

**ConfiguraÃ§Ã£o**:
```json
{
  "name": "CTA Color Test",
  "test_type": "cta_color",
  "control_variant": {
    "color": "yellow",
    "background": "linear-gradient(135deg, #FACC15 0%, #F59E0B 100%)",
    "text_color": "#78350F"
  },
  "test_variant": {
    "color": "purple",
    "background": "linear-gradient(135deg, #7C3AED 0%, #6D28D9 100%)",
    "text_color": "#FFFFFF"
  },
  "primary_metric": "ctr",
  "traffic_split": 50
}
```

**DuraÃ§Ã£o**: 7-14 dias
**Amostra mÃ­nima**: 1.000 visualizaÃ§Ãµes por variante
**CritÃ©rio de sucesso**: DiferenÃ§a de CTR > 10% com significÃ¢ncia > 95%

#### Teste #2: Texto do CTA
**Objetivo**: Descobrir qual copy converte melhor

**ConfiguraÃ§Ã£o**:
```json
{
  "name": "CTA Text Test",
  "test_type": "cta_text",
  "control_variant": {
    "text": "Ver PreÃ§o"
  },
  "test_variant": {
    "text": "Comprar Agora com Frete GrÃ¡tis"
  },
  "primary_metric": "ctr",
  "traffic_split": 50
}
```

**DuraÃ§Ã£o**: 7-14 dias

#### Teste #3: PosiÃ§Ã£o do CTA Principal
**Objetivo**: Descobrir se CTA no topo ou no meio performa melhor

**ConfiguraÃ§Ã£o**:
```json
{
  "name": "CTA Position Test",
  "test_type": "cta_position",
  "control_variant": {
    "position": "after_intro"  // ApÃ³s 2-3 parÃ¡grafos
  },
  "test_variant": {
    "position": "after_features"  // ApÃ³s lista de caracterÃ­sticas
  },
  "primary_metric": "ctr"
}
```

#### Teste #4: Sticky CTA Mobile
**Objetivo**: Avaliar impacto de CTA fixo no footer (mobile)

**ConfiguraÃ§Ã£o**:
```json
{
  "name": "Sticky CTA Mobile Test",
  "test_type": "layout",
  "control_variant": {
    "sticky_cta": false
  },
  "test_variant": {
    "sticky_cta": true
  },
  "primary_metric": "ctr",
  "device_filter": "mobile"
}
```

#### Teste #5: Disclaimer VisÃ­vel vs Discreto
**Objetivo**: Avaliar se disclaimer destacado afeta CTR

**ConfiguraÃ§Ã£o**:
```json
{
  "name": "Disclaimer Style Test",
  "test_type": "layout",
  "control_variant": {
    "disclaimer_style": "highlighted_box"
  },
  "test_variant": {
    "disclaimer_style": "subtle_text"
  },
  "primary_metric": "ctr"
}
```

### ImplementaÃ§Ã£o de Testes A/B

```python
# Backend: Determinar variante para usuÃ¡rio
from hashlib import md5

def get_ab_test_variant(test_id: str, user_id: str) -> str:
    """
    Determina variante A ou B de forma consistente para o usuÃ¡rio.
    Usa hash do user_id para garantir que mesmo usuÃ¡rio sempre veja mesma variante.
    """
    test = db.query(ABTest).get(test_id)

    if not test or test.status != 'running':
        return 'A'  # Sempre retorna controle se teste nÃ£o estiver ativo

    # Hash do user_id para distribuiÃ§Ã£o consistente
    hash_input = f"{test_id}-{user_id}".encode()
    hash_value = int(md5(hash_input).hexdigest(), 16)

    # Distribuir baseado no traffic_split
    if hash_value % 100 < test.traffic_split:
        return 'B'
    else:
        return 'A'

# Template: Aplicar variante
@app.get("/pt-br/{slug}")
async def post_detail(slug: str, request: Request):
    # ... buscar post ...

    # Obter user_id (cookie ou gerar novo)
    user_id = request.cookies.get('user_id') or str(uuid.uuid4())

    # Verificar testes A/B ativos
    active_tests = db.query(ABTest).filter(ABTest.status == 'running').all()

    test_variants = {}
    for test in active_tests:
        variant = get_ab_test_variant(test.id, user_id)
        test_variants[test.name] = variant

    # Renderizar template com variantes
    return templates.TemplateResponse(
        "posts/product_single.html",
        {
            "post": post,
            "ab_tests": test_variants,
            "user_id": user_id
        }
    )
```

```html
<!-- Template: Aplicar variante de CTA -->
{% if ab_tests.get('CTA Color Test') == 'B' %}
  <!-- Variante B: Roxo -->
  <a href="/goto/{{ product.slug }}" class="btn-affiliate btn-purple">
    Ver na Amazon
  </a>
{% else %}
  <!-- Variante A: Amarelo (controle) -->
  <a href="/goto/{{ product.slug }}" class="btn-affiliate btn-yellow">
    Ver na Amazon
  </a>
{% endif %}
```

### AnÃ¡lise de Resultados

```python
# Script de anÃ¡lise de teste A/B
from scipy import stats

def analyze_ab_test(test_id: str):
    """Analisa resultados de teste A/B e determina vencedor"""

    test = db.query(ABTest).get(test_id)
    results = db.query(ABTestResult).filter(ABTestResult.ab_test_id == test_id).all()

    variant_a = next((r for r in results if r.variant == 'A'), None)
    variant_b = next((r for r in results if r.variant == 'B'), None)

    if not variant_a or not variant_b:
        print("Dados insuficientes")
        return

    # Calcular CTR
    ctr_a = (variant_a.clicks / variant_a.views) * 100 if variant_a.views > 0 else 0
    ctr_b = (variant_b.clicks / variant_b.views) * 100 if variant_b.views > 0 else 0

    # Teste de significÃ¢ncia estatÃ­stica (Chi-squared)
    obs = [
        [variant_a.clicks, variant_a.views - variant_a.clicks],
        [variant_b.clicks, variant_b.views - variant_b.clicks]
    ]
    chi2, p_value, dof, expected = stats.chi2_contingency(obs)

    significance = (1 - p_value) * 100

    # Determinar vencedor
    if significance < 95:
        winner = None
        conclusion = "Sem diferenÃ§a estatisticamente significativa"
    elif ctr_b > ctr_a:
        winner = 'B'
        improvement = ((ctr_b - ctr_a) / ctr_a) * 100
        conclusion = f"Variante B venceu com {improvement:.1f}% de melhoria (confianÃ§a {significance:.1f}%)"
    else:
        winner = 'A'
        improvement = ((ctr_a - ctr_b) / ctr_b) * 100
        conclusion = f"Variante A (controle) mantÃ©m-se melhor com {improvement:.1f}% (confianÃ§a {significance:.1f}%)"

    # Atualizar teste
    test.winner = winner
    test.statistical_significance = significance
    test.status = 'completed'
    db.commit()

    print(f"""
    Teste: {test.name}
    Variante A: {ctr_a:.2f}% CTR ({variant_a.clicks}/{variant_a.views})
    Variante B: {ctr_b:.2f}% CTR ({variant_b.clicks}/{variant_b.views})
    SignificÃ¢ncia: {significance:.1f}%
    Vencedor: {winner or 'Empate'}
    ConclusÃ£o: {conclusion}
    """)
```

---

## ğŸ“Š Dashboard e Analytics

### Dashboard de Afiliados (Interface)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š DASHBOARD DE AFILIADOS                     [Hoje] [7 dias] [30 dias] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚ ğŸ’° Receita Estimada: R$ 127,50              â†‘ +15% vs ontem      â”‚
â”‚ ğŸ”— Cliques Totais: 234                       â†‘ +8% vs ontem       â”‚
â”‚ ğŸ“ˆ CTR MÃ©dio: 4.2%                           â†‘ +0.3pp vs ontem    â”‚
â”‚ ğŸ’µ EPC: R$ 0,54                              â†’ estÃ¡vel             â”‚
â”‚ ğŸ¯ Taxa de ConversÃ£o: 6.8%                   â†‘ +1.2pp vs ontem    â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ POR PLATAFORMA                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Amazon]  R$ 68,00 (53%) â”‚ CTR 5.1% â”‚ 120 cliques â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â”‚
â”‚ [ML]      R$ 51,00 (40%) â”‚ CTR 3.8% â”‚  89 cliques â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â”‚
â”‚ [Shopee]  R$ 8,50  (7%)  â”‚ CTR 2.3% â”‚  25 cliques â”‚ â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ† TOP PRODUTOS (Hoje)                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Caneca Baby Yoda        â”‚ Amazon â”‚ 45 cliques â”‚ R$ 22,50       â”‚
â”‚ 2. Funko Darth Vader       â”‚ ML     â”‚ 38 cliques â”‚ R$ 28,00       â”‚
â”‚ 3. Mousepad Gamer RGB      â”‚ Shopee â”‚ 28 cliques â”‚ R$ 4,50        â”‚
â”‚ 4. Camiseta Mandalorian    â”‚ Amazon â”‚ 22 cliques â”‚ R$ 15,00       â”‚
â”‚ 5. LEGO Star Wars         â”‚ ML     â”‚ 18 cliques â”‚ R$ 32,00       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ TOP POSTS (Ãšltimos 7 dias)                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Post                     â”‚ Views â”‚ Cliques â”‚ CTR   â”‚ Est. Receita â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Top 10 Presentes SW     â”‚ 1.240 â”‚   87    â”‚ 7.0%  â”‚ R$ 156,00    â”‚
â”‚ Caneca TÃ©rmica Ideal    â”‚   890 â”‚   34    â”‚ 3.8%  â”‚ R$ 48,00     â”‚
â”‚ Presentes atÃ© R$ 100    â”‚ 2.100 â”‚   63    â”‚ 3.0%  â”‚ R$ 89,00     â”‚
â”‚ Guia Funko Pop 2025     â”‚   670 â”‚   28    â”‚ 4.2%  â”‚ R$ 67,00     â”‚
â”‚ Melhores Mousepads      â”‚   540 â”‚   22    â”‚ 4.1%  â”‚ R$ 31,00     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“± PERFORMANCE POR DISPOSITIVO                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Mobile   â”‚ 75% trÃ¡fego â”‚ CTR 3.8% â”‚ 175 cliques â”‚ R$ 95,00        â”‚
â”‚ Desktop  â”‚ 22% trÃ¡fego â”‚ CTR 5.2% â”‚  52 cliques â”‚ R$ 29,00        â”‚
â”‚ Tablet   â”‚  3% trÃ¡fego â”‚ CTR 3.1% â”‚   7 cliques â”‚ R$ 3,50         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sistema de Alertas

#### Alertas Positivos (Telegram/Slack)

```
âœ… ALTA PERFORMANCE DETECTADA!

Post: "Top 10 Presentes Star Wars"
CTR: 8.5% (meta: 5%)
Receita estimada: R$ 234,00 em 24h
VisualizaÃ§Ãµes: 1.420

ğŸ’¡ AÃ§Ã£o sugerida: Promover em redes sociais
ğŸ“Š Ver detalhes: https://admin.geek.bidu.guru/posts/123
```

#### Alertas Negativos

```
âš ï¸ BAIXA PERFORMANCE DETECTADA

Post: "Presentes Gamer 2025"
CTR: 1.2% (meta: 3%)
VisualizaÃ§Ãµes: 450
Cliques: apenas 5

ğŸ”§ AÃ§Ã£o sugerida:
- Revisar posicionamento de CTAs
- Testar botÃµes mais destacados
- Adicionar senso de urgÃªncia

ğŸ“Š Ver detalhes: https://admin.geek.bidu.guru/posts/456
```

#### Alertas de Oportunidade

```
ğŸ’¡ OPORTUNIDADE DETECTADA!

Produto: "Funko Baby Yoda"
CTR: 12% (muito acima da mÃ©dia!)
Mas apenas 1 post publicado

ğŸš€ AÃ§Ã£o sugerida:
Criar listicle "Top 10 Funkos The Mandalorian"
Potencial de receita: R$ 300-500/mÃªs

ğŸ“ Criar post: https://admin.geek.bidu.guru/posts/new
```

---

## âœ… Compliance e TransparÃªncia

### ImplementaÃ§Ã£o de Disclaimers

#### OpÃ§Ã£o 1: Box Destacado (Recomendado)

```html
<div class="affiliate-disclosure highlighted">
  <div class="icon">â„¹ï¸</div>
  <div class="content">
    <p class="title"><strong>TransparÃªncia:</strong></p>
    <p class="text">
      Este post contÃ©m links de afiliados. Se vocÃª comprar atravÃ©s deles,
      podemos receber uma pequena comissÃ£o sem custo adicional para vocÃª.
      Isso nos ajuda a manter o blog e continuar trazendo as melhores
      recomendaÃ§Ãµes de presentes geek. â¤ï¸
    </p>
    <p class="amazon-disclaimer">
      Como Associado Amazon, ganho com compras qualificadas.
    </p>
    <a href="/sobre-afiliados" class="learn-more">Saiba mais</a>
  </div>
</div>
```

```css
.affiliate-disclosure.highlighted {
    background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
    border-left: 4px solid #F59E0B;
    border-radius: 8px;
    padding: 16px 20px;
    margin: 24px 0;
    display: flex;
    gap: 16px;
    align-items: flex-start;
}

.affiliate-disclosure .icon {
    font-size: 24px;
    flex-shrink: 0;
}

.affiliate-disclosure .content {
    flex: 1;
}

.affiliate-disclosure .title {
    margin: 0 0 8px 0;
    font-size: 16px;
    color: #78350F;
}

.affiliate-disclosure .text {
    margin: 0 0 8px 0;
    font-size: 14px;
    line-height: 1.5;
    color: #78350F;
}

.affiliate-disclosure .amazon-disclaimer {
    margin: 8px 0 0 0;
    font-size: 12px;
    color: #92400E;
    font-style: italic;
}

.affiliate-disclosure .learn-more {
    font-size: 13px;
    color: #F59E0B;
    text-decoration: underline;
}
```

**Posicionamento**: ApÃ³s introduÃ§Ã£o, antes do primeiro link de afiliado

#### OpÃ§Ã£o 2: Texto Discreto (Teste A/B)

```html
<p class="affiliate-disclosure subtle">
  â„¹ï¸ Este post contÃ©m links de afiliados.
  <a href="/sobre-afiliados">Saiba mais</a>
</p>
```

```css
.affiliate-disclosure.subtle {
    font-size: 14px;
    color: #6B7280;
    padding: 12px 0;
    border-top: 1px solid #E5E7EB;
    border-bottom: 1px solid #E5E7EB;
    margin: 20px 0;
}
```

### Atributos de Link

```html
<!-- Sempre usar rel="sponsored" em links de afiliados -->
<a href="/goto/caneca-baby-yoda"
   rel="sponsored"
   data-affiliate="true"
   data-platform="amazon">
  Ver na Amazon
</a>
```

### PÃ¡gina "Sobre Afiliados"

```markdown
# Como Funcionamos - TransparÃªncia Total

## Por Que Usamos Links de Afiliados?

O geek.bidu.guru Ã© **100% gratuito** para vocÃª. NÃ£o cobramos por nossas
recomendaÃ§Ãµes, guias ou listas. Para manter o site funcionando e continuar
trazendo as melhores sugestÃµes de presentes, usamos **links de afiliados**.

## Como Funciona?

1. **VocÃª navega no blog** e encontra um produto que gosta
2. **VocÃª clica no link** "Ver na Amazon" (ou outra loja)
3. **VocÃª Ã© redirecionado** para a loja oficial
4. **Se vocÃª comprar**, recebemos uma pequena comissÃ£o (geralmente 3-8% do valor)
5. **VocÃª paga o mesmo preÃ§o** - nÃ£o hÃ¡ custo adicional para vocÃª

## Isso Afeta Nossas RecomendaÃ§Ãµes?

**NÃ£o.** Nosso compromisso Ã© recomendar os **melhores produtos**, nÃ£o os que
pagam mais. Usamos critÃ©rios rigorosos:

- â­ AvaliaÃ§Ã£o mÃ­nima de 4 estrelas
- ğŸ“¦ Disponibilidade e entrega confiÃ¡vel
- ğŸ’° Melhor custo-benefÃ­cio
- ğŸ¯ RelevÃ¢ncia para o pÃºblico geek

## Quais Lojas Usamos?

Trabalhamos com:
- **Amazon** (Programa Associados Amazon)
- **Mercado Livre** (Programa de Afiliados ML)
- **Shopee** (Programa de Afiliados Shopee)

## Perguntas Frequentes

**Posso confiar nas recomendaÃ§Ãµes?**
Sim. Nosso time analisa reviews, compara opÃ§Ãµes e testa produtos antes de recomendar.

**VocÃªs recomendam produtos ruins sÃ³ por comissÃ£o?**
Nunca. Nossa reputaÃ§Ã£o depende de recomendaÃ§Ãµes honestas e Ãºteis.

**Como vocÃªs ganham dinheiro?**
Exclusivamente atravÃ©s de comissÃµes de afiliados. NÃ£o vendemos dados, nÃ£o temos
paywalls, nÃ£o exibimos anÃºncios intrusivos.

**Quanto vocÃªs ganham por compra?**
Entre 3-8% do valor do produto, dependendo da categoria e plataforma.

## Contato

DÃºvidas sobre nosso modelo de afiliados? Envie um email para:
contato@geek.bidu.guru
```

---

## ğŸ›¡ï¸ ProteÃ§Ã£o Contra Fraude

### Rate Limiting

```python
from slowapi import Limiter, _rate_limit_exceeded_handler
from slowapi.util import get_remote_address
from slowapi.errors import RateLimitExceeded

limiter = Limiter(key_func=get_remote_address)
app.state.limiter = limiter
app.add_exception_handler(RateLimitExceeded, _rate_limit_exceeded_handler)

@app.get("/goto/{slug}")
@limiter.limit("10/minute")  # MÃ¡ximo 10 cliques por minuto por IP
async def redirect_affiliate(slug: str, request: Request):
    # ... cÃ³digo de redirecionamento ...
    pass
```

### DetecÃ§Ã£o de Bots

```python
def is_bot(user_agent: str) -> bool:
    """Detecta bots conhecidos via user-agent"""
    bot_patterns = [
        'bot', 'crawler', 'spider', 'scraper',
        'curl', 'wget', 'python-requests',
        'googlebot', 'bingbot', 'yahoo', 'yandex',
        'facebook', 'twitter', 'linkedin'
    ]

    ua_lower = user_agent.lower()
    return any(pattern in ua_lower for pattern in bot_patterns)

@app.get("/goto/{slug}")
async def redirect_affiliate(slug: str, request: Request):
    user_agent = request.headers.get('user-agent', '')

    # Se for bot, redirecionar mas nÃ£o contar como clique vÃ¡lido
    if is_bot(user_agent):
        product_price = db.query(ProductPrice).filter(...).first()
        return RedirectResponse(url=product_price.affiliate_url_raw, status_code=302)

    # ... cÃ³digo normal de tracking ...
```

### ValidaÃ§Ã£o de Referer

```python
@app.get("/goto/{slug}")
async def redirect_affiliate(slug: str, request: Request):
    referer = request.headers.get('referer', '')

    # Clique deve vir do prÃ³prio site
    valid_referers = [
        'https://geek.bidu.guru',
        'http://localhost:8000'  # Dev
    ]

    is_valid_referer = any(referer.startswith(ref) for ref in valid_referers)

    # Registrar clique
    click = AffiliateClick(
        # ... campos normais ...
        is_suspicious=not is_valid_referer
    )

    # Se referer invÃ¡lido, marcar como suspeito mas ainda redirecionar
    db.add(click)
    db.commit()

    # ... continuar redirecionamento ...
```

### Dashboard de Cliques Suspeitos

```sql
-- Query: Cliques suspeitos (Ãºltimos 7 dias)
SELECT
    DATE(clicked_at) as date,
    COUNT(*) as total_clicks,
    COUNT(*) FILTER (WHERE is_suspicious) as suspicious_clicks,
    COUNT(*) FILTER (WHERE is_bot) as bot_clicks,
    ROUND(COUNT(*) FILTER (WHERE is_suspicious)::NUMERIC / COUNT(*) * 100, 2) as suspicious_percentage
FROM affiliate_clicks
WHERE clicked_at >= NOW() - INTERVAL '7 days'
GROUP BY DATE(clicked_at)
ORDER BY date DESC;
```

---

## ğŸ“… Roadmap de ImplementaÃ§Ã£o

### Fase 1: FundaÃ§Ã£o (Semanas 1-4)

#### Semana 1: Tracking e Infraestrutura
- [ ] Expandir tabela `affiliate_clicks` com campos completos
- [ ] Implementar endpoint `/goto/` com UTM parameters
- [ ] Adicionar detecÃ§Ã£o de dispositivo, geolocalizaÃ§Ã£o
- [ ] Implementar rate limiting (10 cliques/min por IP)
- [ ] Adicionar detecÃ§Ã£o bÃ¡sica de bots

#### Semana 2: Compliance e Disclaimers
- [ ] Criar componente de disclaimer (box destacado)
- [ ] Adicionar disclaimer automaticamente em posts com afiliados
- [ ] Garantir `rel="sponsored"` em todos os links
- [ ] Criar pÃ¡gina `/sobre-afiliados`
- [ ] Implementar FAQ de transparÃªncia

#### Semana 3: MÃ©tricas e Benchmarks
- [ ] Definir benchmarks de CTR por plataforma (Amazon 4-6%, ML 3-5%, Shopee 2-4%)
- [ ] Documentar metas de EPC, RPM, taxa de conversÃ£o
- [ ] Criar queries SQL para dashboard de mÃ©tricas
- [ ] Integrar Google Analytics 4 com eventos customizados de afiliados

#### Semana 4: CTAs e Design
- [ ] Criar 3-5 variaÃ§Ãµes de botÃµes de afiliados (amarelo, roxo, verde)
- [ ] Implementar componentes reutilizÃ¡veis no frontend
- [ ] Definir posicionamento padrÃ£o de CTAs (inÃ­cio + meio + fim)
- [ ] Otimizar CTAs para mobile (44px+, full-width, sticky footer)

---

### Fase 2: OtimizaÃ§Ã£o (Semanas 5-12)

#### Semana 5-6: Scorecard de Produtos
- [ ] Implementar funÃ§Ã£o `calculate_affiliate_score()`
- [ ] Criar job diÃ¡rio para atualizar scores de todos os produtos
- [ ] Adicionar coluna `internal_score` em `product_prices`
- [ ] Integrar scorecard no Fluxo A do n8n (produtos score > 70)

#### Semana 7-8: Dashboard de Afiliados
- [ ] Criar interface de dashboard no admin
- [ ] Implementar overview diÃ¡rio (receita, cliques, CTR, EPC)
- [ ] Criar seÃ§Ã£o "Top Produtos" e "Top Posts"
- [ ] Adicionar breakdown por plataforma e dispositivo

#### Semana 9-10: Testes A/B
- [ ] Implementar tabelas `ab_tests` e `ab_test_results`
- [ ] Criar interface no admin para configurar testes
- [ ] Implementar lÃ³gica de distribuiÃ§Ã£o de variantes
- [ ] Executar primeiro teste: Cor do botÃ£o (amarelo vs roxo)

#### Semana 11-12: Alertas e OtimizaÃ§Ã£o
- [ ] Implementar sistema de alertas (Telegram/Slack)
- [ ] Criar alertas de alta performance (CTR > 8%)
- [ ] Criar alertas de baixa performance (CTR < 2%)
- [ ] Criar alertas de oportunidade (produtos com alto CTR)

---

### Fase 3: Escala (Meses 4-6)

#### MÃªs 4: TÃ©cnicas de ConversÃ£o
- [ ] Implementar templates de urgÃªncia ("Ãšltimas unidades")
- [ ] Criar badges de escassez (quando aplicÃ¡vel)
- [ ] Implementar tabelas comparativas multi-plataforma
- [ ] Adicionar prova social (avaliaÃ§Ãµes, nÃºmero de vendas)

#### MÃªs 5: AnÃ¡lise AvanÃ§ada
- [ ] Criar funil de conversÃ£o completo (visualizaÃ§Ã£o â†’ compra)
- [ ] Implementar segmentaÃ§Ã£o de dados (mobile vs desktop, fonte, horÃ¡rio)
- [ ] Criar relatÃ³rio semanal automÃ¡tico (PDF via email)
- [ ] Implementar tracking de posiÃ§Ã£o de link (JavaScript)

#### MÃªs 6: Parcerias Diretas
- [ ] Contatar 5-10 marcas geek para parcerias diretas
- [ ] Negociar comissÃµes maiores (10-15% vs 3-5%)
- [ ] Criar conteÃºdo exclusivo com marcas parceiras
- [ ] Implementar tracking separado para parcerias diretas

---

### Fase 4: AvanÃ§ado (Meses 7-12)

#### MÃªs 7-8: AutomaÃ§Ã£o AvanÃ§ada
- [ ] Implementar pÃ¡gina intermediÃ¡ria de redirecionamento (teste A/B)
- [ ] Criar sistema de wishlist + alertas de desconto
- [ ] Implementar cupons de desconto automÃ¡ticos
- [ ] Criar programa de early access (prÃ©-lanÃ§amentos)

#### MÃªs 9-10: ExpansÃ£o de Plataformas
- [ ] Adicionar novas plataformas de afiliados (se disponÃ­veis)
- [ ] Implementar cashback automÃ¡tico (se viÃ¡vel)
- [ ] Criar programa de referÃªncia de afiliados

#### MÃªs 11-12: OtimizaÃ§Ã£o e Escala
- [ ] AnÃ¡lise completa de ROI por plataforma
- [ ] OtimizaÃ§Ã£o de posts de baixa performance
- [ ] CriaÃ§Ã£o de 50+ posts otimizados para conversÃ£o
- [ ] Meta: R$ 5.000-10.000/mÃªs de receita de afiliados

---

## ğŸ“ ConclusÃ£o

Com a implementaÃ§Ã£o desta estratÃ©gia detalhada de afiliados, o geek.bidu.guru pode atingir:

âœ… **CTR de 4-6%** (vs mÃ©dia de mercado 2-3%)
âœ… **Taxa de conversÃ£o de 6-8%** (vs mÃ©dia 3-5%)
âœ… **RPM de R$ 30-50** (vs mÃ©dia R$ 10-20)
âœ… **Receita de R$ 5k-10k/mÃªs** em 12 meses

Posicionando o projeto no **top 10% de sites de afiliados brasileiros**.

---

**VersÃ£o**: 1.0
**Ãšltima atualizaÃ§Ã£o**: 2025-12-10
**Baseado em**: reports/affiliate-marketing-analysis.md
**AprovaÃ§Ã£o**: Pendente
**ResponsÃ¡vel**: Equipe de Produto + Affiliate Marketing Specialist
